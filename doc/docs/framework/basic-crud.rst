Basic CRUD Operations with models
=================================

Model code-generator
--------------------

Once you've generated your models using :doc:`the migration tool <./migrations>` you'll notice a lot of files getting auto-generated in the ``<projectRoot>/autogen`` directory:

#. For every table that your DB contains you'll have an auto-generated model called ``AutoGenerated.Models.<SingularizedTableNameInCamelCase>``. 
#. For every table that has a primary key called ``id`` (which is a recommended convention), you'll have an auto-generated module called ``AutoGenerated.PrimaryKeys.<ModelName>Id``
#. For every **unique** column-name, across all your tables, you'll have an auto-generated lens-class called ``AutoGenerated.Classes.Has<FieldNameInCamelCase>``

For example, if you have the following two tables in your DB schema...

+------------+----------------------------------+
| users      | contacts                         |
+============+==================================+
| id         | id                               |
+------------+----------------------------------+
| created_at | created_at                       |
+------------+----------------------------------+
| updated_at | updated_at                       |
+------------+----------------------------------+
| email      | email                            |
+------------+----------------------------------+
| password   | first_name                       |
+------------+----------------------------------+
| first_name | last_name                        |
+------------+----------------------------------+
| last_name  | street_address                   |
+------------+----------------------------------+
|            | state                            |
+------------+----------------------------------+
|            | country                          |
+------------+----------------------------------+
|            | zip                              |
+------------+----------------------------------+
|            | **user_id references users(id)** |
+------------+----------------------------------+

...you'll end up with the following files:


+------------------------------------------------+----------------+
| Filename                                       | Purpose        |
+================================================+================+
| autogen/AutoGenerated/Models/User.hs           | User model     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Models/Contact.hs        | Contact model  |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/PrimaryKeys/UserId.hs    | newtype for PK |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/PrimaryKeys/ContactId.hs | newtype for PK |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Id.hs            | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Id.hs            | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/CreatedAt.hs     | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/UpdatedAt.hs     | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Email.hs         | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Password.hs      | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/FirstName.hs     | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/LastName.hs      | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/StreetAddress.hs | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/State.hs         | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Country.hs       | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/Zip.hs           | Lens class     |
+------------------------------------------------+----------------+
| autogen/AutoGenerated/Classes/UserId.hs        | Lens class     |
+------------------------------------------------+----------------+

Try the following in your REPL:

.. code:: haskell

   createModel 
